# הגדרת הפרויקט - מחולל החידות

## מטרת הפרויקט
מערכת ליצירת חידות אינטראקטיביות בעברית המבוססת על סדרות נתונים מוגדרות מראש. המערכת מאפשרת למשתמשים לפתור חידות מגוונות דרך ממשק ווב ידידותי.

## ארכיטקטורת המערכת

### קבצים עיקריים:

#### 1. `app.py` - ממשק המשתמש
- **תפקיד**: ממשק Streamlit הראשי של האפליקציה
- **פונקציונליות**:
  - הצגת חידות למשתמש
  - קבלת תשובות (בחירה מרובה או טקסט חופשי)
  - הצגת רמזים
  - בדיקת תשובות נכונות
  - ניהול מצב המשתמש (session state)
- **מצב המשתמש**:
  - `current_puzzle`: החידה הנוכחית
  - `used_hint`: האם השתמש ברמז
  - `user_answer`: התשובה של המשתמש

#### 2. `puzzle_engine.py` - מנוע החידות
- **תפקיד**: ניהול הלוגיקה של יצירת חידות
- **פונקציות עיקריות**:
  - `load_series()`: טעינת סדרות מ-JSON
  - `get_ordered_series()`: סינון סדרות מסודרות וסופיות
  - `generate_random_puzzle()`: יצירת חידה רנדומלית
- **לוגיקה**: בוחר סדרה רנדומלית ופונקציית חידה, מפעיל את הפונקציה עם הפרמטרים הנדרשים

#### 3. `puzzles.py` - מאגר פונקציות החידות
- **תפקיד**: אוסף של פונקציות חידה שונות
- **מבנה**: Registry אוטומטי עם decorator `@register`
- **סוגי חידות**:
  - `letter_position_puzzle`: השלמת אות במיקום מסוים
  - `two_letters_puzzle`: מציאת זוג אותיות
  - `multiple_choice_anagram_puzzle`: בחירה מרובה עם אנגרמות
  - `embedded_word_puzzle`: מילים מוטמעות
  - `matrix_transpose_puzzle`: חידות מטריצה
  - `mispunctuation_word_puzzle`: מילים עם פיסוק שגוי
  - `numeric_sequence_puzzle`: רצפים מספריים
  - `country_anagram_puzzle`: אנגרמות של מדינות
  - `letter_shift_puzzle`: הזזת אותיות
  - `mysterious_equation_puzzle`: משוואות מסתוריות
  - `numeric_sequence_missing_puzzle`: רצפים עם מספר חסר
  - `next_palindrome_number_puzzle`: מספרי פלינדרום
  - `quirky_equation_puzzle`: משוואות מוזרות
  - `digit_count_range_puzzle`: טווחי ספרות

#### 4. `series.json` - בסיס הנתונים
- **תפקיד**: מאגר סדרות נתונים לחידות
- **מבנה כל סדרה**:
  - `id`: מזהה ייחודי
  - `labels`: תוויות בעברית ואנגלית
  - `ordered`: האם הסדרה מסודרת
  - `finite`: האם הסדרה סופית
  - `size`: גודל הסדרה
  - `language`: שפת הסדרה
  - `category`: קטגוריה
  - `items`: רשימת הפריטים
- **סוגי סדרות**: חודשים, כוכבי לכת, מזלות, צבעים, מספרים, חיות, מטבעות ועוד

#### 5. `run_app.bat` - סקריפט הפעלה
- **תפקיד**: הפעלת האפליקציה בסביבת Windows
- **פונקציונליות**:
  - הפעלת virtual environment (אם קיים)
  - הפעלת Streamlit
  - המתנה לסגירת החלון

## זרימת העבודה

### 1. הפעלת המערכת
```
run_app.bat → streamlit run app.py → טעינת series.json → יצירת חידה ראשונית
```

### 2. יצירת חידה חדשה
```
לחיצה על "חידה חדשה" → generate_random_puzzle() → בחירת סדרה + פונקציית חידה → הפעלת הפונקציה → הצגת החידה
```

### 3. פתרון חידה
```
הצגת החידה → קלט משתמש → בדיקת תשובה → הצגת תוצאה
```

### 4. שימוש ברמז
```
לחיצה על "רמז" → הצגת רמז → סימון שהשתמש ברמז
```

## מאפיינים טכניים

### שפות תכנות
- **Python**: שפת התכנות הראשית
- **Streamlit**: מסגרת ווב לממשק משתמש
- **JSON**: אחסון נתונים

### ארכיטקטורה
- **Modular**: הפרדה בין ממשק, מנוע ופונקציות חידה
- **Registry Pattern**: רישום אוטומטי של פונקציות חידה
- **Session Management**: ניהול מצב משתמש
- **Random Generation**: יצירת חידות רנדומליות

### תמיכה בשפות
- **עברית**: שפה ראשית עם תמיכה מלאה
- **אנגלית**: תמיכה חלקית בתוויות

## הוראות פיתוח

### הוספת חידה חדשה
1. הוסף פונקציה חדשה ב-`puzzles.py`
2. השתמש ב-decorator `@register`
3. הפונקציה חייבת לקבל `series` ו-`rng` כפרמטרים
4. הפונקציה חייבת להחזיר dict עם המבנה הנדרש

### הוספת סדרה חדשה
1. הוסף אובייקט חדש ל-`series.json`
2. הגדר את כל השדות הנדרשים
3. וודא שהסדרה מתאימה לסוגי החידות הקיימים

### מבנה תשובת חידה
```python
{
    "title": "כותרת החידה",
    "question": "שאלת החידה",
    "hint": "רמז (אופציונלי)",
    "answer": "התשובה הנכונה",
    "options": ["אפשרות 1", "אפשרות 2", ...],  # רק לחידות בחירה מרובה
    "meta": {...}  # מידע טכני נוסף
}
```

## דרישות מערכת
- Python 3.7+
- Streamlit
- גישה לאינטרנט (להפעלת Streamlit)
- דפדפן ווב מודרני

## הערות חשובות
- המערכת תומכת רק בסדרות מסודרות וסופיות לחלק מהחידות
- כל פונקציית חידה יכולה לקבל פרמטרים שונים
- המערכת משתמשת ב-session state לשמירת מצב המשתמש
- התמיכה בעברית דורשת קידוד UTF-8 